<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Azure OpenAI o1 Chat</title>
    
    <!-- Styles -->
    <link rel="stylesheet" href="/static/css/fonts.css">
    <link rel="stylesheet" href="/static/css/variables.css">
    
    <link rel="stylesheet" href="/static/css/components.css">
    
    

    <!-- Scripts -->
    
    
    
    
    <!-- Core Modules -->
    <script type="module" src="/static/js/session.js"></script>
    <script type="module" src="/static/js/config.js"></script>
    <script type="module" src="/static/js/utils/helpers.js"></script>
    <script type="module" src="/static/js/ui/markdownParser.js"></script>
    <script type="module" src="/static/js/ui/notificationManager.js"></script>
    <script type="module" src="/static/js/ui/displayManager.js"></script>
    <script type="module" src="/static/js/fileManager.js"></script>
    <script type="module" src="/static/js/messageHandler.js"></script>
    <script type="module" src="/static/js/main.js"></script>
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <main class="chat-container">
        <header class="chat-header">
            <h1>Azure OpenAI o1 Chat</h1>
            <div class="model-info">
                <p><strong>Model Info:</strong> Using Azure OpenAI o1 model (no streaming)</p>
            </div>
        </header>

        <div class="chat-main">
            <!-- Chat History -->
            <section class="chat-history" id="chat-history" role="log" aria-live="polite">
                <!-- Messages injected via JavaScript -->
            </section>

            <!-- Input Area -->
            <section class="input-section">
                <div class="input-container">
                    <textarea id="user-input" 
                             placeholder="Type your message..."
                             aria-label="Your message"
                             rows="3"></textarea>
                    <button id="send-button" class="primary-button">
                        <span aria-hidden="true">‚Üë</span>
                        <span class="sr-only">Send message</span>
                    </button>
                </div>
                
                <!-- Token Usage -->
                <div class="token-usage-compact">
                    <h2 class="stats-heading">Token Usage</h2>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <span class="stat-label">Prompt</span>
                            <span id="prompt-tokens" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Completion</span>
                            <span id="completion-tokens" class="stat-value">0</span>
                        </div>
                        <div class="stat-item highlight">
                            <span class="stat-label">Total</span>
                            <span id="total-tokens" class="stat-value">0</span>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="tabs" role="tablist">
                <button class="tab-button active" 
                        id="config-tab"
                        role="tab" 
                        aria-selected="true"
                        aria-controls="config-content">
                    Configuration
                </button>
                <button class="tab-button"
                        id="files-tab"
                        role="tab"
                        aria-selected="false"
                        aria-controls="files-content">
                    Files & Context
                </button>
            </div>

            <!-- Configuration Panel -->
            <div id="config-content" class="tab-content active" role="tabpanel">
                <div class="config-section">
                    <label for="developer-config">Assistant Settings:</label>
                    <input type="text" 
                           id="developer-config"
                           value="Formatting re-enabled - use markdown code blocks"
                           aria-describedby="config-help">
                    <p id="config-help" class="help-text">
                        Customize the assistant's response format
                    </p>
                </div>

                <div class="config-section">
                    <label for="reasoning-effort-slider">
                        Reasoning Effort: <span id="effort-display">Medium</span>
                    </label>
                    <input type="range" 
                           id="reasoning-effort-slider"
                           min="0" 
                           max="2" 
                           value="1"
                           aria-valuetext="Medium">
                    <div class="effort-description">
                        <p id="effort-description-text">
                            Medium: Balanced processing time (1-3min) and quality
                        </p>
                    </div>
                </div>
            </div>

            <!-- Files Panel -->
            <div id="files-content" class="tab-content" role="tabpanel" aria-hidden="true">
                <div class="file-upload-area" id="drop-zone" tabindex="0" role="button">
                    <div class="upload-prompt">
                        <i class="upload-icon" aria-hidden="true">üìÅ</i>
                        <p>Drop files or click to upload<br>
                            <span class="file-limit">(Max 512MB)</span>
                        </p>
                        <input type="file" 
                               id="file-input" 
                               accept=".txt,.md,.json,.js" 
                               multiple 
                               hidden>
                    </div>
                </div>
                
                <div class="file-list" id="file-list"></div>
                
                <div class="file-stats">
                    <h3>Context Statistics</h3>
                    <dl>
                        <dt>Files:</dt>
                        <dd id="total-files">0</dd>
                        <dt>Characters:</dt>
                        <dd id="total-chars">0</dd>
                        <dt>Estimated Tokens:</dt>
                        <dd id="estimated-tokens">0</dd>
                    </dl>
                </div>
            </div>
        </aside>

        <!-- Theme Toggle -->
        <button class="theme-toggle" aria-label="Toggle theme">
            <span class="theme-icon">üåì</span>
        </button>
    </main>

    <!-- Error Display -->
    <div id="error-display" class="error-message"></div>

    <!-- Initialization -->
    <script type="module" src="/static/js/init.js"></script>
</body>
</html>
